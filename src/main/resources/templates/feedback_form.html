<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizza Form</title>
    <link rel="stylesheet" type="text/css" href="/css/pizza.css">
</head>

<body>
<header>
    <form action="http://localhost:8088/accounts/list">
        <input type="submit" value="Go to accounts CRUD"/>
    </form>
    <form action="http://localhost:8088/addresses/list">
        <input type="submit" value="Go to addresses CRUD"/>
    </form>
    <form action="http://localhost:8088/feedbacks/list">
        <input type="submit" value="Go to feedbacks CRUD"/>
    </form>
    <form action="http://localhost:8088/ingredients/list">
        <input type="submit" value="Go to ingredients CRUD"/>
    </form>
    <form action="http://localhost:8088/orders/list">
        <input type="submit" value="Go to orders CRUD"/>
    </form>
    <form action="http://localhost:8088/pizzas/list">
        <input type="submit" value="Go to pizzas CRUD"/>
    </form>
    <form action="http://localhost:8088/restaurants/list">
        <input type="submit" value="Go to restaurants CRUD"/>
    </form>
    <form action="http://localhost:8088/roles/list">
        <input type="submit" value="Go to roles CRUD"/>
    </form>
    <form action="http://localhost:8088/sideitems/list">
        <input type="submit" value="Go to side items CRUD"/>
    </form>
</header>
<table>
<thead>
<h2 style="background: #f2f2f2">My orders</h2>
<tr>
    <th>Restaurant</th>
    <th>To deliver?</th>
    <th>Address</th>
    <th>Delivered</th>
    <th>Pizzas</th>
    <th>Side Items</th>
</tr>
</thead>
<tbody>
<tr th:each="order : ${orders}">

    <td th:text="${order.restaurant != null} ? ${order.restaurant.id} : ''"></td>
    <td th:text="${order.to_deliver} ? 'Yes' : 'No'"></td>
    <td th:text="${order.address != null} ? ${order.address.street + ', ' + order.address.building + '-' + order.address.apartment} : ''"></td>
    <td th:text="${order.delivered}"></td>
    <td>
            <span th:each="pizza : ${pizzasForOrders[__${order.id}__]}"
                  th:text="${pizza.name + ', ' + pizza.pizza_size}"></span>
    </td>
    <td>
        <span th:each="item : ${sideItemsForOrders[__${order.id}__]}" th:text="${item.name}"></span>
    </td>
    <td>
        <form th:action="@{'/feedbacks/add/' + ${order.id}}" th:method="get">
            <button type="submit">Write feedback</button>
        </form>
    </td>
</tr>
</tbody>
</table>
</body>
</html>